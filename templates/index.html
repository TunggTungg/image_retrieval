<html lang="en">


<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Image Retrieval App</title>
  <link rel="icon" type="image/x-icon" href="static\love.png">
  <script src="https://code.jquery.com/jquery-3.5.1.min.js"
          integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
  <link rel="stylesheet" href="{{ url_for('static', path='style.css') }}">
  <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
</head>

<body>
  <div class="container">
    <div id="top">
      <h1>Image Retrieval System</h1>
      <p>Based on Similarity Search, Feature Embedding and Local Optimize Procduct Quantization</p>
    </div>

    <div class="wrapper">
      <div id="main">
        <a class="btn btnanimate" onclick="Click()">Upload and Start Retrievaling</a>
        
        <form action="{{ url_for('generate')}}" method="POST" enctype="multipart/form-data" id="form">
              <input type="file" name="file" id="file_input"  style="display: None;" accept="image/*" onchange="handleFileInputChange()">
        </form>
        

        <figure>
          <img src="{{input_img}}" alt="Input Image" id='input_image' onerror="this.style.display='none'">
          <figcaption>User's Uploaded Image</figcaption>
        <figure> 

        <div class="result_container">
          {% for result_list in result_list %}
          <div class="result_figure">
              <img src="{{ url_for('static', path=result_list)}}">
          </div>
          {% endfor %}
        </div>
      </div>
    </div>

  <footer>
    <hr/>
    <p>Created with <span class="icon"><i class="fa fa-heart fa-lg" style="color:red;"></i></span> by <a href="http://designify.me/" target="_blank"> Designify.me</a></p>
  </footer>
</body>

<script>

    function Click() {
      // Trigger the click event of the input tag
      document.getElementById('file_input').click();
    }

    function handleFileInputChange() {
      // Reference to the form

      var form = document.getElementById('form');
      // Submit the form
      form.submit();
    }
</script>

</html>
